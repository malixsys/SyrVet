
<html ng-app="syrVetApp">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">

  <title>Dealer Locator</title>

  <link href="http://code.ionicframework.com/1.0.0-beta.3/css/ionic.css" rel="stylesheet">
  <script src="http://code.ionicframework.com/1.0.0-beta.3/js/ionic.bundle.js"></script>
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
  <style>
    .map {
      border: 1px solid white;
      position:absolute;
      width:100%;
      bottom:0;
      top: 0;
    }
  </style>
</head>
<body ng-controller="MainCtrl">
<div class="map"></div>
<script>
  angular.module('syrVetApp', ['ionic'])

      .controller('MainCtrl', function($scope) {
      })
      .directive('map', function() {
        return {
          restrict: 'C',
          template: '<div>A</div>',
          replace: true,
          link: function(scope, ele, attrs) {
            //
            var latlng = new google.maps.LatLng(45.8, -73);
            var myOptions = {
              zoom: 9,
              center: latlng,
              mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(ele[0],myOptions);

            geocoder = new google.maps.Geocoder();

            geocoder.geocode( { 'address': ' 224, St-Jude Street North; Granby, Qc'}, function(results, status) {
              if (status == google.maps.GeocoderStatus.OK) {
                var marker = new google.maps.Marker({
                  map: map,
                  position: results[0].geometry.location,
                  title: "Mondou in Granby"
                });
                var infowindow = new google.maps.InfoWindow({
                  content: "<h3>Mondou</h3>Address:  224, St-Jude Street North; Granby, Qc"
                });
                google.maps.event.addListener(marker, 'click', function() {
                  infowindow.open(map,marker);
                });
                marker.orderid = 1;
                marker.infowindow = infowindow;
                markers[markers.length] = marker;
              } else {
                //alert("Geocode was not successful for the following reason: " + status);
              }
            });

            //
          }
        };
      })
  ;
</script>
</body>
</html>